<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script>
			/* 
				闭包 
				写法:
				外部函数嵌套内部函数,外部返回return 返回内部函数
				
				如何调用
				var fn1=外部函数()
				fn1();
				fn1();
				fn1();
				
				如何清除闭包
				fn1=null;
				
				
				闭包的优缺点
				
				
	
	有权访问另一个函数作用域中的变量的函数。
	闭包创建的常见方式，就是在一个函数fn1内部嵌套一个函数fn2，
	那么fn2就可以访问fn1里面的所有变量了，且将fn2作为fn1的返回值，那么在外部就可以调用f2了		 
		
		
		能读取函数内部的局部变量的函数，并且此函数被外层函数返回；
		优点：可以访问外层函数的局部变量  减少全局变量的声明，避免全局污染；
		缺点：外层函数的局部变量会驻存在内存中  不会被回收   会导致内存泄露；
		
		
		闭包函数
				
				 函数套函数
				 1.访问外层函数中的局部变量
				 2.作为外层函数的返回值被返回
				 优点：可以作为函数与函数的桥梁   访问外层函数中的局部变量
				 缺点：外层的局部变量无法被回收   从而造成内存泄露    所以使用闭包时要慎用
				 

		
		
			 */
			function wai1(){
				var a=1;
				function nei1(){
					a+=1;
					return a;
				}
				return nei1;//重点
			}
			
			var fun1=wai1();
			console.log("fun1:",fun1);
			var r1=fun1();
			console.log("r1:",r1);
			var r1=fun1();
			console.log("r1:",r1);
			var r1=fun1();
			console.log("r1:",r1);
			var r1=fun1();
			console.log("r1:",r1);
			
			//清除闭包 重点
			fun1=null;//清除闭包
			fun1=wai1();
			var r1=fun1();
			console.log("清除以前的闭包了,重新开始9999999999999r1:",r1);
			
			console.log("/////////////////////////");
			function wai2(){
				var a=1;
				return function(){//重点
					a+=1;
					return a;
				}
				
			}
			var fun2=wai2();
			var r2=fun2();
			console.log("r2:",r2);
			var r2=fun2();
			console.log("r2:",r2);
			var r2=fun2();
			console.log("r2:",r2);
			var r2=fun2();
			console.log("r2:",r2);
			console.log("/////////////////////////");
			
			var x=1;
			function add(){
				x+=1;
				console.log("x,",x);
			}
			add();
			add();
			add();
			add();
			
			
		</script>
	</body>
</html>
